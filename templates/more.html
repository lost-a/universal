{% load static %}
{% block content %}
{% load socialaccount %}
{% load crispy_forms_tags %}
<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Universal Adventures</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- <link rel="manifest" href="site.webmanifest"> -->
    <link rel="icon" href={% static './img/Universal Adventures Logo.png' %} sizes="16x16" type="image/png">
    <!-- Place favicon.ico in the root directory -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href={% static 'css/bootstrap.min.css' %}>
    <link rel="stylesheet" href={% static 'css/owl.carousel.min.css' %}>
    <link rel="stylesheet" href={% static 'css/magnific-popup.css' %}>
    <link rel="stylesheet" href={% static 'css/font-awesome.min.css' %}>
    <link rel="stylesheet" href={% static 'css/themify-icons.css' %}>
    <link rel="stylesheet" href={% static 'css/nice-select.css' %}>
    <link rel="stylesheet" href={% static 'css/flaticon.css' %}>
    <link rel="stylesheet" href={% static 'css/gijgo.css' %}"">
    <link rel="stylesheet" href={% static ' css/animate.css' %}>
    <link rel="stylesheet" href={% static 'css/slick.css' %}>
    <link rel="stylesheet" href={% static 'css/slicknav.css' %}>
    <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/datepicker/1.0.10/datepicker.min.css"
        integrity="sha512-YdYyWQf8AS4WSB0WWdc3FbQ3Ypdm0QCWD2k4hgfqbQbRCJBEgX0iAegkl2S1Evma5ImaVXLBeUkIlP6hQ1eYKQ=="
        crossorigin="anonymous" />
    <link rel="stylesheet" href={% static 'css/style.css' %}>
    <!-- <link rel="stylesheet" href="css/responsive.css"> -->
    <style>
        .datepicker td, .datepicker th {
            width: 2.5rem;
            height: 2.5rem;
            font-size: 0.85rem;
        }

        .datepicker {
            margin-bottom: 3rem;
        }
        .floating-btn {
            width: 50px;
            height: 50px;
            padding: 16px 20px;
            border: none;
            cursor: pointer;
            opacity: 0.8;
            position: fixed;
            bottom: 23px;
            right: 28px;
            background: transparent;
            text-decoration: none;
            z-index: 8;
        }

        .chat-popup {
            display: none;
            position: fixed;
            bottom: 0;
            right: 15px;
            border: 3px solid #f1f1f1;
            z-index: 9;
        }

        /* Add styles to the form container */
        .form-container {
            max-width: 300px;
            padding: 10px;
            background-color: white;
        }

        .form-containers {
            max-width: 300px;
            min-width: 300px;
            padding: 10px;
            background-color: white;
            display: none;
        }

        /* Full-width textarea */
        .form-container .in {
            width: 100%;
            padding: 15px;
            margin: 5px 0 22px 0;
            border: none;
            background: #f1f1f1;
            resize: none;

        }

        /* When the textarea gets focus, do something */
        .form-container .in:focus {
            background-color: #ddd;
            outline: none;
        }

        /* Set a style for the submit/send button */
        .form-container .btn {
            background-color: #4CAF50;
            color: white;
            padding: 16px 20px;
            border: none;
            cursor: pointer;
            width: 100%;
            margin-bottom: 10px;
            opacity: 0.8;
        }

        /* Add a red background color to the cancel button */
        .form-container .cancel {
            background-color: red;
        }

        /* Add some hover effects to buttons */
        .form-container .btn:hover,
        .open-button:hover {
            opacity: 1;
        }
    </style>
    <style>
        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 15px;
            border-radius: 5px;  
            background: #d3d3d3;
            outline: none;
            opacity: 0.7;
            -webkit-transition: .2s;
            transition: opacity .2s;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%; 
            background: #4CAF50;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
        }
    </style>
    <!-- <link rel="stylesheet" href="css/responsive.css"> -->
</head>

<body style="background-color: #F6F8FB;">
    <div class="loader_bg">
        <div class="loader">
        </div>
    </div>
    <nav class="navbar  navbar-expand-lg  fixed-top navbar-light" id="mainNav">
        <div class="container">
            <a class="navbar-brand js-scroll-trigger" href="/"><img
                    src={% static 'img//Universal Adventures Logo.png' %} width="70px">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="navbar-collapse collapse" id="navbarResponsive">
                <form method="get" class="form-inline my-2 my-lg-0" action="/search">
                    <input class="form-control mr-sm-2" type="text" placeholder="Search" id="query" name="query">
                </form>
                <ul class="navbar-nav text-uppercase ml-auto">
                        <li class="nav-item">
                            <a class="nav-link js-scroll-trigger" href="tel:8882654593">Call Us</a>
                        </li>
                    
                    {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link js-scroll-trigger" href="/profile">Hello {{user}}</a>
                    </li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="/accounts/logout">logout</a></li>
                    {% else %}<li class="nav-item"><a class="nav-link js-scroll-trigger" href="#" id="modal"
                            data-toggle="modal" data-target="#log">Login</a></li>

                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    <div class="modal fade" id="log" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <a href="{% provider_login_url "facebook" method="js_sdk" %}"
                        class="btn btn-block btn-social btn-facebook"
                        style="background-color:#3b5998;text-align:center;color:white">
                        <span class="fa fa-facebook"></span>
                        Sign in with Facebook
                    </a>
                    <a href="{% provider_login_url "google"  %}" process="connect"
                        class="btn btn-block btn-social btn-google"
                        style="background-color:red;text-align:center;color:white">
                        <span class="fa fa-google-plus"></span>
                        Sign in with Google
                    </a>


                </div>
            </div>
        </div>
    </div>

    <div class="recent_trip_area">
        <div class="container">
            {% if products|length < 1 %}
                <div class="alert alert-warning" role="alert">
                    <p>Your Search  - <b>{{query}}</b> - didn't match any adventures Try different keyword</p>
                </div>
            {% else %}
            <div class="row">
               <div class="col-xs col-md-3 col-lg-3 filter" style="background-color: white;border-radius: 25px;">
                    <h3>Filter</h3>
                    <form method="POST">
                        {% csrf_token %}
                        <div class="container" style="margin-top: 1rem;">
                            <h4>Adventure Type</h4>
                            <ul>
                                <li><input type="radio" value="All" name="adventure">All</input></li>
                                <li><input type="radio" value="Less Adventure" name="adventure">Less Adventure</input></li>
                                <li><input type="radio" value="Moderate Adventure" name="adventure">Moderate Adventure</input></li>
                                <li><input type="radio" value="Extreme Adventure" name="adventure">Extreme Adventure</input></li>
                            </ul>
                        </div>
                        <div class="container" style="margin-top: 1rem;">
                            <h4>Price Range</h4>
                            <input type="hidden" name="price"></input>
                            <div class="slidecontainer">
                                <label id="demo">Max Price:</label>
                                <input type="range" min="1" max="10000" value="1" class="slider" name="range" id="myrange">
                            </div>
                        </div>
                        <div class="container" style="margin-top: 1rem;">
                            <h4>Duration</h4>
                            <ul>
                                <li><input type="radio" value="0-2 hours" name="duration">0-2 hours</input></li>
                                <li><input type="radio" value="2-5 hours" name="duration">2-5 hours</input></li>
                                <li><input type="radio" value="Half Day" name="duration">Half Day</input></li>
                                <li><input type="radio" value="Full Day" name="duration">Full Day</input></li>
                                <li><input type="radio" value="Multiple Day" name="duration">Multiple Days</input></li>
                            </ul>
                        </div>
                        <div class="container" style="margin-top: 1rem;">
                            <input type="submit" value="Filter" class="btn btn-success"></input>
                        </div>
                        
                    </form>
               </div>
               <div class="col-xs col-md-9 col-lg-9">
                    {% for product in products %}
                        <div class="container" style="background-color: white;border-radius: 25px;height: 220px;width: 100%;display: flex;justify-content: space-between;    padding-left: 0px;margin-bottom: 3.5rem;color: #505050;transition: all .2s ease-in-out 0s;">
                            <div class="inline-block" style="min-width: 220px;flex: 0 0 28.4%;height: 100%;position: relative;display: flex;">
                                {% with product.images_set.all|first as image %}

                                <img src="{{image.image.url}}" style="    width: 100%;
                                height: 100%;
                                object-fit: cover;"/>
                                {% endwith %}
                            </div>
                            <div class="inline-block" style="padding: 18px 37px;overflow: hidden;">
                                <h6 style="font-size: 1.0rem;font-weight: 700;line-height: 1.23;letter-spacing: -0.5px;
                                -webkit-line-clamp: 2;
                                max-height: calc(2rem * 1.23 * 2);
                                overflow: hidden;
                                text-overflow: ellipsis;
                                display: -webkit-box;
                                -webkit-box-orient: vertical;
                                color: #505050;">{{product.name}}</h6>
                                <div class="result-content-descriptors" style="    display: flex;
                                justify-content: flex-start;
                                margin: 1.4rem 0;">
                                    <div class="info-nugget inline-block" style="display: inline-flex;
                                    align-items: center;">
                                      <span class="icon" style="padding: 0px 5px 0px 0px;    position: relative;
                                      vertical-align: middle;
                                      font-size: 13px;
                                      color: rgba(59,68,78,0.7);"><i class="fa fa-clock-o"></i></span>
                                      {% if product.duration_type == "Full Day" %}
                                      <p class="inline-text" style="    margin-left: 10px;
                                      margin-bottom: 0;
                                      font-size: 13px;
                                      font-weight: 600;
                                      color: #848484;">{{product.days}} Day</p>
                                      {% elif product.duration_type == "Multiple Day" %}
                                      <p class="inline-text" style="    margin-left: 10px;
                                      margin-bottom: 0;
                                      font-size: 13px;
                                      font-weight: 600;
                                      color: #848484;">{{product.days}} Days</p>
                                      {% else %}
                                      <p class="inline-text" style="margin-left: 10px;
                                      margin-bottom: 0;
                                      font-size: 13px;
                                      font-weight: 600;
                                      color: #848484;">{{product.days}} Hours</p>
                                      {% endif %}
                                    </div>
                                    <div class="info-nugget inline-block" style="margin-left: 20px;display: inline-flex;align-items: center;">
                                        <span class="icon" style="padding: 0px 5px;    position: relative;
                                        vertical-align: middle;
                                        font-size: 13px;
                                        color: rgba(59,68,78,0.7);"><i class="fa fa-map-marker"></i></span>
                                      <p class="inline-text" style="margin-left: 10px;
                                      margin-bottom: 0;
                                      font-size: 13px;
                                      font-weight: 600;
                                      color: #848484;">{{product.loca_city}}</p>
                                    </div>
                                </div>
                                <div class="details" style="margin-top: 1.2rem;color: #848484;">
                                    <ol style="padding-left: 0px;">
                                        {% for des in product.des_set.all %}
                                        <li><span style="color: #4CAF50;"><i class="fa fa-check-circle"></i></span><span style="    padding-left: 5px;
                                            vertical-align: middle;">{{des.description}}</span></li>
                                        {% endfor %}
                                    </ol>

                                </div>
                            </div>
                            <div class="inline-block" style="padding: 1rem 0;flex: 0 0 20%;">
                                <div class="info-vox" style="display: flex;flex-direction: column;align-items: center;justify-content: space-around;padding: 0rem 2rem;">
                                    <div class="star" style="    margin: 0 auto;margin-top: 5px;">
                                        <span style="color: #FFB100;">
                                            <script>
                                                for (var i = 1; i <= {{product.rating}}; i++) {
                                                    document.write('<i class="fa fa-star"></i>');
                                                }
                                            </script>
                                        </span>
                                    </div>
                                    <div class="price" style="margin-top: 20px;display: flex;flex-direction: column;align-items: center;">
                                        <p style="font-size: 12px;">Starting From</p>
                                        <p class="normal" style="text-decoration: line-through;font-size: 12px;">Rs {{product.regular}}</p>
                                        <p class="pr"
                                        style=" font-size: 12px;font-weight: bold;color: #ED6E32;">Rs {{product.sale}} Only</p>
                                        <p style="margin-top: 2px;"><a class="btn btn-success" type="button" href="/products/{{product.slug}}">Book Now</a></p>
                                    </div>

                                </div>

                            </div>

                        </div>
                    {% endfor %}

                </div> 
            </div>
            {% endif %}
        </div>
    </div>
    <div class="button">
        <div class="icons">
            <button class="floating-btn" onclick="openForm()">
                <img src="https://img.icons8.com/color/48/000000/speech-bubble-with-dots.png" />
            </button>
        </div>
    </div>
    <div class="chat-popup" id="myform">
        <div class="form-containers" id="fr2" style="text-align: center;">
            <img src={% static 'img//Universal Adventures Logo.png' %} width="70px" style="margin-bottom: 1rem;">
            <h3 style="margin-bottom: 1rem;">Thank You!</h3>
            <h3 style="margin-bottom: 1rem;">Our Expert Will Call You In A Moment</h3>
            <button class="btn btn-info" onclick="closeForm()">Close</button>
        </div>
        <form class="form-container" id="formg" name="submit-to-google-sheet">
            <h4>Fill the details below to start chat</h4>
            <button class="close" onclick="closeForm()"><span aria-hidden="true">×</span></button>
            <input type="text" placeholder="Name" name="name" class="in" id="a" />
            <input type="text" placeholder="Email" name="email" class="in" id="b" />
            <input type="text" placeholder="Phone No" name="phone" class="in" id="c" />
            <label for="enquiry">Tell Us About your query</label>
            <ul>
                <li><input type="radio" value="Adventure Sports" name="enquiry">Adventure Sports</input></li>
                <li><input type="radio" value="Tour Packages" name="enquiry">Tour Packages</input></li>
                <li><input type="radio" value="Other" name="enquiry">Other</input></li>
            </ul>

            
            <button class="btn btn-success" onclick="Sub()" type="submit">Start Chat</button>
            <a class="btn btn-secondary" href="tel:8882654593">Call Now! 8882654593</a>
            
        </form>
    </div>

    <footer class="footer">
        <div class="footer_top">
            <div class="container">
                <div class="row">
                    <div class="col-xl-4 col-md-6 col-lg-4 ">
                        <div class="footer_widget">
                            <div class="footer_logo">
                                <a href="#">
                                    <img src={% static 'img/Universal Adventures Logo.png' %} alt="">
                                </a>
                            </div>
                            <a href="#">+91 8882654593</a> <br>
                            <a href="mailto:contact@universaladventures.in">contact@universaladventures.in</a>
                            </p>
                            <div class="socail_links">
                                <ul>
                                    <li>
                                        <a href="https://www.facebook.com/universaladventuresindia/">
                                            <i class="ti-facebook"></i>
                                        </a>
                                    </li>

                                    <li>
                                        <a href="https://www.instagram.com/universaladventuresindia/">
                                            <i class="fa fa-instagram"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://g.co/kgs/FEs31r">
                                            <i class="fa fa-google-plus"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>

                        </div>
                    </div>
                    <div class="col-xl-2 col-md-6 col-lg-2">
                        <div class="footer_widget">
                            <h3 class="footer_title">
                                Company
                            </h3>
                            <ul class="links">
                                <li><a href="#">Pricing</a></li>
                                <li><a href="#">About</a></li>
                                <li><a href="#"> Gallery</a></li>
                                <li><a href="#"> Contact</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 col-lg-3">
                        <div class="footer_widget">
                            <h3 class="footer_title">
                                Popular destination
                            </h3>
                            <ul class="links double_links">
                                <li><a href="#">Indonesia</a></li>
                                <li><a href="#">America</a></li>
                                <li><a href="#">India</a></li>
                                <li><a href="#">Switzerland</a></li>
                                <li><a href="#">Italy</a></li>
                                <li><a href="#">Canada</a></li>
                                <li><a href="#">Franch</a></li>
                                <li><a href="#">England</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 col-lg-3">
                        <div class="footer_widget">
                            <h3 class="footer_title">
                                Instagram
                            </h3>
                            <div class="instagram_feed" id="ing">
                               
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- JS here -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"> </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script src={% static 'js/vendor/modernizr-3.5.0.min.js' %}></script>
    <script src={% static 'js/popper.min.js' %}></script>
    <script src={% static 'js/bootstrap.min.js' %}></script>
    <script src={% static 'js/owl.carousel.min.js' %}></script>
    <script src={% static 'js/isotope.pkgd.min.js' %}></script>
    <script src={% static 'js/ajax-form.js' %}></script>
    <script src={% static 'js/waypoints.min.js' %}></script>
    <script src={% static 'js/jquery.counterup.min.js' %}></script>
    <script src={% static 'js/imagesloaded.pkgd.min.js' %}></script>
    <script src={% static 'js/scrollIt.js' %}></script>
    <script src={% static 'js/jquery.scrollUp.min.js' %}></script>
    <script src={% static 'js/wow.min.js' %}""></script>
    <script src={% static 'js/nice-select.min.js' %}></script>
    <script src={% static 'js/jquery.slicknav.min.js' %}></script>
    <script src={% static 'js/jquery.magnific-popup.min.js' %}""></script>
    <script src={% static 'js/plugins.js' %}></script>
    <script src={% static 'js/gijgo.min.js' %}></script>
    <script src={% static 'js/slick.min.js' %}></script>


    <!--contact js-->

    <script src={% static 'js/contact.js' %}></script>
    <script src={% static 'js/jquery.ajaxchimp.min.js' %}></script>
    <script src={% static 'js/jquery.form.js' %}></script>
    <script src={% static 'js/jquery.validate.min.js' %}></script>
    <script src={% static 'js/mail-script.js' %}></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datepicker/1.0.10/datepicker.min.js"
        integrity="sha512-RCgrAvvoLpP7KVgTkTctrUdv7C6t7Un3p1iaoPr1++3pybCyCsCZZN7QEHMZTcJTmcJ7jzexTO+eFpHk4OCFAg=="
        crossorigin="anonymous"></script>

    <script src={% static 'js/main.js' %}></script>
    
    <script>
        $('#datepicker').datepicker({
            iconsLibrary: 'fontawesome',
            icons: {
                rightIcon: '<span class="fa fa-caret-down"></span>'
            }
        });
    </script>
    <script>
        $(function () {
            $(window).scroll(function () {
                var mainbottom = $("header").offset().top + $("header").height();
                if ($(this).scrollTop() < mainbottom) {

                    $('nav').removeClass('first');

                } else {

                    $('nav').addClass('first');

                }
            })
        })
    </script>
    <script>

        $("#query").keyup(function() {
            $("#query").autocomplete({
            source: '/ajax_calls/search/',
            minLength: 2,
            open: function(){
                setTimeout(function () {
                    $('.ui-autocomplete').css('z-index', 1110);
                    console.log("it worked")
                }, 0);
            },
            select: function( event, ui ) { 
                window.location.href = "destination/"+ui.item.value;
                console.log(ui.item)
            }
            });
            
        });

    function AutoCompleteSelectHandler(event, ui)
    {
        var selectedObj = ui.item;
    }

    </script>
    <script>
        var slider = document.getElementById("myrange");
        var output = document.getElementById("demo");
        output.innerHTML = slider.value; // Display the default slider value

        // Update the current slider value (each time you drag the slider handle)
        slider.oninput = function() {
        output.innerHTML = "Max Price:"+this.value;
        }
    </script>
    <script>
        setTimeout( function(){
            $('.loader_bg').fadeToggle();
        },1500);
    </script>
    <script>
        const scriptURL =
            'https://script.google.com/macros/s/AKfycbziV7Mm6pFPVVtTnySlNa2n2qICTQULTavH2YlQVrgjz2aODjo/exec'
        const form = document.forms['submit-to-google-sheet']

        form.addEventListener('submit', e => {
            e.preventDefault()
            fetch(scriptURL, {
                    method: 'POST',
                    body: new FormData(form)
                })
                .then(response => console.log('Success!', response))
                .catch(error => console.error('Error!', error.message))
        })
    </script>
    <script>
        function openForm() {
            document.getElementById("myform").style.display = "block";
        }

        function closeForm() {
            document.getElementById("myform").style.display = "none";
        }

        function Sub() {
            document.getElementById("formg").style.display = "none";
            document.getElementById("fr2").style.display = "block";
        }
    </script>
            <script>
                const instagramRegExp = new RegExp(/<script type="text\/javascript">window\._sharedData = (.*);<\/script>/)
        
                const fetchInstagramPhotos = async (accountUrl) => {
                    const response = await axios.get(accountUrl)
                    const json = JSON.parse(response.data.match(instagramRegExp)[1])
                    const edges = json.entry_data.ProfilePage[0].graphql.user.edge_owner_to_timeline_media.edges.splice(
                        0, 9)
                    const photos = edges.map(({
                        node
                    }) => {
                        return {
                            url: `https://www.instagram.com/p/${node.shortcode}/`,
                            thumbnailUrl: node.thumbnail_src,
                            displayUrl: node.display_url,
                            caption: node.edge_media_to_caption.edges.length > 0 ? node.edge_media_to_caption.edges[0].node.text : ""
                        }
                    })
                    return photos
                }
        
                (async () => {
                    try {
                        const photos = await fetchInstagramPhotos('https://www.instagram.com/universaladventuresindia/')
                        const container = document.getElementById("ing")
                        console.log(photos);
                        photos.forEach(el => {
                            const a = document.createElement('a')
                            const img = document.createElement('img')
                            const div = document.createElement('div')
                            a.setAttribute('href', el.url)
                            a.setAttribute('target', '_blank')
                            a.setAttribute('rel', 'noopener noreferrer')
                            a.classList.add('instagram-photo')
        
                            img.setAttribute('src', el.thumbnailUrl)
                            img.setAttribute('alt', el.caption)
        
                            a.appendChild(img)
                            div.classList.add('single_insta')
                            div.appendChild(a)
                            container.appendChild(div)
                        })
                    } catch (e) {
                        console.error('Fetching Instagram photos failed', e)
                    }
                })()
            </script>
</body>

</html>
{% endblock %}